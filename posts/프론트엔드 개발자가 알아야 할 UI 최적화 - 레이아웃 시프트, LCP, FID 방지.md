---
title: 프론트엔드 개발자가 알아야 할 UI 최적화 - 레이아웃 시프트, LCP, FID 방지
date: 2024-07-03
tags:
  - UI
  - Layout Shift
  - LCP
  - FID
  - 프론트엔드
  - 성능 최적화
  - 사용자 경험
published: true
contributor:
  name: 이혜림
  social:
    github: https://github.com/matty255
---

# 프론트엔드 개발자가 알아야 할 UI 최적화 - 레이아웃 시프트, LCP, FID 방지

웹 개발에서 사용자 경험(UX)은 매우 중요한 요소입니다. 특히, 레이아웃 시프트(Layout Shift), 가장 긴 콘텐츠 로드 시간(LCP, Largest Contentful Paint), 첫 번째 입력 지연 시간(FID, First Input Delay)와 같은 문제는 사용자 경험을 저해하는 주요 요인입니다. 이번 글에서는 프론트엔드 개발자로서 알아야 할 이러한 문제들을 방지 및 최적화하는 방법에 대해 깊이 있게 다루어 보겠습니다.

[[toc]]

# 레이아웃 시프트 이해 및 방지

## 레이아웃 시프트란?

레이아웃 시프트는 페이지 내 요소들이 예기치 않게 이동하는 현상을 말합니다. 이는 이미지나 광고, 웹폰트 로딩 등으로 인해 발생하며, 사용자에게 혼란과 불편을 줄 수 있습니다. 예를 들어, 사용자가 버튼을 클릭하려는 순간에 버튼이 갑자기 이동하면 잘못된 곳을 클릭하게 되는 문제가 발생할 수 있습니다.

### 레이아웃 시프트의 영향

레이아웃 시프트는 사용자가 웹사이트를 사용할 때 큰 불편을 초래할 수 있습니다. 특히, 모바일 환경에서는 더 큰 문제를 일으킬 수 있습니다. 작은 화면에서 요소들이 이동하면 사용자가 의도치 않게 잘못된 링크나 버튼을 누르게 될 가능성이 높아집니다. 이는 사용자 만족도를 낮추고, 나아가 웹사이트 이탈률을 증가시킬 수 있습니다.

## 레이아웃 시프트의 원인

### 이미지 크기 미지정

이미지 크기를 명시하지 않으면, 이미지가 로드되기 전까지 공간을 차지하지 않기 때문에 레이아웃이 변할 수 있습니다. 이는 특히 느린 네트워크 환경에서 문제가 됩니다.

### 동적 콘텐츠 삽입

자바스크립트를 통해 동적으로 콘텐츠가 삽입되면 기존 레이아웃이 변경될 수 있습니다. 예를 들어, 광고나 추천 콘텐츠가 동적으로 로드될 때 문제가 발생할 수 있습니다.

### 웹폰트 로딩

웹폰트가 로드되기 전까지 기본 폰트가 사용되다가, 웹폰트가 로드되면 텍스트 크기나 간격이 변할 수 있습니다. 이는 특히 첫 페이지 로드 시 문제가 될 수 있습니다.

### 광고 삽입

광고 네트워크에서 동적으로 광고가 삽입되면서 레이아웃이 변경될 수 있습니다. 이는 광고가 불규칙한 크기일 때 더욱 두드러집니다.

## 레이아웃 시프트 방지 방법

### 이미지 크기 명시

이미지 크기를 명시하여 이미지가 로드되기 전에도 일정한 공간을 차지하도록 합니다. 이를 통해 이미지 로드 전후의 레이아웃 변화를 방지할 수 있습니다.

```html
<img src="image.jpg" alt="Description" width="600" height="400" />
```

위와 같이 `width`와 `height` 속성을 사용하여 이미지 크기를 명시하면 브라우저가 이미지 로드 전에도 해당 공간을 확보하게 됩니다.

### 동적 콘텐츠 삽입 최소화

동적 콘텐츠 삽입을 최소화하고, 필요한 경우 삽입될 콘텐츠의 크기를 미리 예약해두는 방법을 사용합니다.

```javascript
// 동적 콘텐츠 삽입 예제
const contentContainer = document.getElementById("content-container");
contentContainer.style.height = "200px"; // 콘텐츠가 삽입될 공간 확보
contentContainer.innerHTML = "<p>동적으로 삽입된 콘텐츠입니다.</p>";
```

위와 같이 동적 콘텐츠가 삽입될 공간을 미리 확보해두면 레이아웃 시프트를 방지할 수 있습니다.

### 웹폰트 로딩 최적화

웹폰트 로딩 시 FOUT(Flash of Unstyled Text) 또는 FOIT(Flash of Invisible Text)를 방지하기 위해 `font-display` 속성을 사용합니다. 이는 웹폰트가 로드되지 않았을 때의 대체 폰트 처리를 지정하는 속성입니다.

```css
@font-face {
  font-family: "MyWebFont";
  src: url("mywebfont.woff2") format("woff2");
  font-display: swap;
}
```

`font-display: swap`을 사용하면 웹폰트가 로드되기 전까지 대체 폰트가 사용되며, 웹폰트가 로드되면 대체 폰트가 웹폰트로 교체됩니다. 이를 통해 레이아웃 시프트를 최소화할 수 있습니다.

### 광고 삽입 최적화

광고가 동적으로 삽입될 때 발생하는 레이아웃 시프트를 방지하기 위해 광고가 삽입될 공간을 미리 예약해둡니다.

```html
<div id="ad-container" style="width: 300px; height: 250px;">
  <!-- 광고 코드 -->
</div>
```

광고 컨테이너의 크기를 미리 지정하여 광고 로드 전후의 레이아웃 변화를 방지할 수 있습니다.

# 가장 긴 콘텐츠 로드 시간(LCP) 이해 및 방지

## LCP란?

LCP는 사용자가 페이지를 로드할 때 가장 큰 텍스트 블록이나 이미지가 화면에 나타나는 시간을 측정합니다. 이는 사용자에게 중요한 첫인상을 좌우하는 중요한 지표입니다.

### LCP의 중요성

LCP는 웹 페이지의 로드 속도를 나타내는 중요한 지표 중 하나로, 사용자가 페이지를 처음 로드할 때 가장 큰 시각적 요소가 완전히 표시되는 시간을 측정합니다. 이 시간은 사용자가 웹 페이지가 유용하고 반응이 빠르다고 느끼는 데 중요한 역할을 합니다. LCP가 느리면 사용자는 페이지 로드가 느리다고 느끼고, 이탈률이 높아질 수 있습니다.

## LCP의 원인

### 느린 서버 응답 시간

서버 응답 시간이 길면 LCP가 느려질 수 있습니다. 이는 서버가 요청을 처리하고 응답을 반환하는 데 걸리는 시간과 관련이 있습니다.

### 렌더링 차단 리소스

CSS와 JavaScript 파일이 렌더링을 차단하면 페이지 로드가 느려질 수 있습니다. 특히, 대용량의 CSS와 JavaScript 파일이 문제가 됩니다.

### 느린 리소스 로드 시간

이미지, 비디오 등 대용량 리소스의 로드 시간이 길면 LCP가 느려질 수 있습니다. 이는 네트워크 속도와 리소스 최적화 상태에 따라 달라집니다.

### 클라이언트 측 렌더링

SPA(Single Page Application)와 같이 클라이언트 측에서 많은 로직을 처리하는 경우, 초기 로드 시간이 길어질 수 있습니다.

## LCP 최적화 방법

### 느린 서버 응답 시간 개선

서버 응답 시간을 개선하기 위해 콘텐츠 전송 네트워크(CDN)를 사용하거나, 서버 측 캐싱을 활용합니다. CDN은 전 세계에 분산된 서버를 통해 사용자가 가까운 서버에서 콘텐츠를 빠르게 로드할 수 있도록 도와줍니다.

### 렌더링 차단 리소스 최소화

CSS와 JavaScript 파일을 최소화하고, 중요한 스타일을 인라인으로 포함시킵니다. 또한, 불필요한 JavaScript를 지연 로드하거나 비동기로 로드하여 초기 로드를 빠르게 합니다.

```html
<style>
  /* 중요한 스타일 */
</style>
<link rel="stylesheet" href="styles.css" />
<script src="script.js" async></script>
```

### 리소스 로드 시간 최적화

이미지와 비디오와 같은 리소스를 최적화하고, `preload`와 `prefetch`를 사용하여 중요한 리소스를 미리 로드합니다. 이미지 포맷을 WebP와 같은 최신 포맷으로 변경하면 용량을 줄일 수 있습니다.

```html
<link rel="preload" href="image.jpg" as="image" />
```

### 클라이언트 측 렌더링 최적화

React의 `Suspense`와 `React.lazy`를 사용하여 비동기 컴포넌트를 로드합니다. 이를 통해 초기 로드 시간을 줄이고, 필요한 경우에만 컴포넌트를 로드하여 성능을 최적화할 수 있습니다.

```javascript
import React, { Suspense, lazy } from "react";

const LazyComponent = lazy(() => import("./LazyComponent"));

function App() {
  return (
    <div>
      <Suspense fallback={<div>Loading...</div>}>
        <LazyComponent />
      </Suspense>
    </div>
  );
}

export default App;
```

# 첫 번째 입력 지연 시간(FID) 이해 및 방지

##

FID란?

FID는 사용자가 페이지를 처음 상호작용할 때(예: 버튼 클릭) 브라우저가 해당 이벤트에 반응하는 데 걸리는 시간을 측정합니다. 짧은 FID는 빠른 사용자 피드백을 의미합니다.

### FID의 중요성

FID는 사용자 경험의 중요한 요소로, 사용자가 페이지를 로드한 후 처음으로 상호작용할 때의 반응 속도를 나타냅니다. FID가 길면 사용자는 페이지가 느리고 반응이 없다고 느낄 수 있으며, 이는 사용자 만족도를 크게 떨어뜨릴 수 있습니다. 특히, 상호작용이 중요한 애플리케이션에서는 FID가 더욱 중요합니다.

## FID의 원인

### 메인 스레드 작업

메인 스레드에서 긴 작업이 실행되면 사용자가 상호작용할 때 이벤트 핸들러가 즉시 실행되지 않을 수 있습니다. 이는 자바스크립트의 대량 실행이나 복잡한 계산 작업이 원인이 될 수 있습니다.

### 렌더링 차단 JavaScript

렌더링을 차단하는 JavaScript는 페이지 로드를 지연시키고, 첫 번째 입력 시 이벤트 핸들러가 지연될 수 있습니다.

### 대규모 JavaScript 번들

대규모 JavaScript 번들은 로드 시간과 파싱 시간을 증가시켜 FID를 악화시킬 수 있습니다.

## FID 최적화 방법

### 메인 스레드 작업 최소화

메인 스레드에서 실행되는 작업을 최소화하여 첫 번째 입력에 빠르게 반응할 수 있도록 합니다. 이를 위해 Web Workers를 활용할 수 있습니다. Web Workers를 사용하면 메인 스레드에서 실행되는 작업을 별도의 스레드로 분리하여 성능을 개선할 수 있습니다.

```javascript
if (window.Worker) {
  const myWorker = new Worker("worker.js");
  myWorker.postMessage("Hello, Worker!");
}
```

### 렌더링 차단 JavaScript 최소화

비동기 로딩을 사용하여 JavaScript가 렌더링을 차단하지 않도록 합니다. 이를 통해 초기 로드 시간을 단축하고, 사용자의 첫 번째 입력 시 반응 시간을 줄일 수 있습니다.

```html
<script src="script.js" async></script>
```

### JavaScript 번들 최적화

코드를 분할하여 필요한 경우에만 로드되도록 합니다. Webpack의 코드 분할 기능을 활용하면 초기 로드 시간을 단축하고, FID를 개선할 수 있습니다.

```javascript
// Webpack 코드 분할 예제
import(/* webpackChunkName: "lodash" */ "lodash").then(({ default: _ }) => {
  // lodash 사용 코드
});
```

## FID를 개선하기 위한 추가 팁

### 불필요한 폴리필 제거

최신 브라우저에서는 불필요한 폴리필을 제거하여 번들 크기를 줄일 수 있습니다. 예를 들어, Babel을 사용하여 필요하지 않은 폴리필을 자동으로 제거할 수 있습니다.

### CSS 최적화

CSS도 FID에 영향을 미칠 수 있습니다. 불필요한 스타일을 제거하고, CSS 파일을 분할하여 필요한 경우에만 로드되도록 합니다.

```html
<link rel="stylesheet" href="styles.css" />
```

### 자바스크립트 실행 시간 줄이기

자바스크립트 코드를 최적화하여 실행 시간을 줄입니다. 함수 호출을 최소화하고, 복잡한 연산을 최적화합니다.

```javascript
// 복잡한 연산을 최적화한 예제
const optimizedCalculation = (array) => {
  return array.reduce((acc, value) => acc + value, 0);
};
```

# 결론

레이아웃 시프트, 가장 긴 콘텐츠 로드 시간(LCP), 첫 번째 입력 지연 시간(FID)는 사용자 경험을 저해하는 주요 요소입니다. 이러한 문제를 방지하고 최적화하는 방법을 이해하고 적용함으로써 사용자에게 더 나은 경험을 제공할 수 있습니다. 이미지 크기 명시, 동적 콘텐츠 삽입 최소화, 웹폰트 로딩 최적화, 광고 삽입 최적화 등의 방법을 통해 레이아웃 시프트를 방지할 수 있습니다. 또한, PageSpeed Insights와 Lighthouse와 같은 도구를 사용하여 성능을 측정하고 개선할 수 있습니다. React와 Next.js 같은 프레임워크와 라이브러리를 활용하면 더욱 효율적으로 문제를 해결할 수 있습니다.

---

질문이나 제안 사항이 있으시면 GitHub에서 연락주세요. 행복한 코딩 되세요!
